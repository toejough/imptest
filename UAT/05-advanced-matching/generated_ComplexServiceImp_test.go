// Code generated by impgen. DO NOT EDIT.

package matching_test

import "github.com/toejough/imptest/imptest"
import "testing"
import "time"
import matching "github.com/toejough/imptest/UAT/05-advanced-matching"

type ComplexServiceImpMock struct {
	imp *ComplexServiceImp
}

type ComplexServiceImp struct {
	*imptest.Controller[*ComplexServiceImpCall]
	Mock         *ComplexServiceImpMock
	ExpectCallIs *ComplexServiceImpExpectCallIs
	currentCall  *ComplexServiceImpCall
}

type ComplexServiceImpProcessCall struct {
	responseChan chan ComplexServiceImpProcessCallResponse
	done         bool
	d            matching.Data
}

type ComplexServiceImpProcessCallResponse struct {
	Type       string // "return", "panic", or "resolve"
	Result0    bool
	PanicValue any
}

func (c *ComplexServiceImpProcessCall) InjectResult(result bool) {
	c.done = true
	c.responseChan <- ComplexServiceImpProcessCallResponse{Type: "return", Result0: result}
}
func (c *ComplexServiceImpProcessCall) InjectPanic(msg any) {
	c.done = true
	c.responseChan <- ComplexServiceImpProcessCallResponse{Type: "panic", PanicValue: msg}
}

func (m *ComplexServiceImpMock) Process(d matching.Data) bool {
	responseChan := make(chan ComplexServiceImpProcessCallResponse, 1)

	call := &ComplexServiceImpProcessCall{
		responseChan: responseChan,
		d:            d,
	}

	callEvent := &ComplexServiceImpCall{
		Process: call,
	}

	m.imp.CallChan <- callEvent

	resp := <-responseChan

	if resp.Type == "panic" {
		panic(resp.PanicValue)
	}

	return resp.Result0
}

type ComplexServiceImpCall struct {
	Process *ComplexServiceImpProcessCall
}

func (c *ComplexServiceImpCall) Name() string {
	if c.Process != nil {
		return "Process"
	}
	return ""
}

func (c *ComplexServiceImpCall) Done() bool {
	if c.Process != nil {
		return c.Process.done
	}
	return false
}

func (c *ComplexServiceImpCall) AsProcess() *ComplexServiceImpProcessCall {
	return c.Process
}

type ComplexServiceImpExpectCallIs struct {
	imp     *ComplexServiceImp
	timeout time.Duration
}

type ComplexServiceImpProcessBuilder struct {
	imp     *ComplexServiceImp
	timeout time.Duration
}

func (e *ComplexServiceImpExpectCallIs) Process() *ComplexServiceImpProcessBuilder {
	return &ComplexServiceImpProcessBuilder{imp: e.imp, timeout: e.timeout}
}

func (bldr *ComplexServiceImpProcessBuilder) ExpectArgsAre(d matching.Data) *ComplexServiceImpProcessCall {
	validator := func(callToCheck *ComplexServiceImpCall) bool {
		if callToCheck.Name() != "Process" {
			return false
		}
		methodCall := callToCheck.AsProcess()
		if methodCall.d != d {
			return false
		}
		return true
	}

	call := bldr.imp.GetCall(bldr.timeout, validator)
	return call.AsProcess()
}

func (bldr *ComplexServiceImpProcessBuilder) ExpectArgsShould(d any) *ComplexServiceImpProcessCall {
	validator := func(callToCheck *ComplexServiceImpCall) bool {
		if callToCheck.Name() != "Process" {
			return false
		}
		methodCall := callToCheck.AsProcess()
		var ok bool
		ok, _ = imptest.MatchValue(methodCall.d, d)
		if !ok {
			return false
		}
		return true
	}

	call := bldr.imp.GetCall(bldr.timeout, validator)
	return call.AsProcess()
}

func (bldr *ComplexServiceImpProcessBuilder) InjectResult(result bool) *ComplexServiceImpProcessCall {
	validator := func(callToCheck *ComplexServiceImpCall) bool {
		return callToCheck.Name() == "Process"
	}

	call := bldr.imp.GetCall(bldr.timeout, validator)
	methodCall := call.AsProcess()
	methodCall.InjectResult(result)
	return methodCall
}

func (bldr *ComplexServiceImpProcessBuilder) InjectPanic(msg any) *ComplexServiceImpProcessCall {
	validator := func(callToCheck *ComplexServiceImpCall) bool {
		return callToCheck.Name() == "Process"
	}

	call := bldr.imp.GetCall(bldr.timeout, validator)
	methodCall := call.AsProcess()
	methodCall.InjectPanic(msg)
	return methodCall
}

type ComplexServiceImpTimed struct {
	ExpectCallIs *ComplexServiceImpExpectCallIs
}

func (i *ComplexServiceImp) Within(d time.Duration) *ComplexServiceImpTimed {
	return &ComplexServiceImpTimed{
		ExpectCallIs: &ComplexServiceImpExpectCallIs{imp: i, timeout: d},
	}
}

func (i *ComplexServiceImp) GetCurrentCall() *ComplexServiceImpCall {
	if i.currentCall != nil && !i.currentCall.Done() {
		return i.currentCall
	}
	i.currentCall = i.GetCall(0, func(c *ComplexServiceImpCall) bool { return true })
	return i.currentCall
}

func NewComplexServiceImp(t *testing.T) *ComplexServiceImp {
	imp := &ComplexServiceImp{
		Controller: imptest.NewController[*ComplexServiceImpCall](t),
	}
	imp.Mock = &ComplexServiceImpMock{imp: imp}
	imp.ExpectCallIs = &ComplexServiceImpExpectCallIs{imp: imp}
	return imp
}
